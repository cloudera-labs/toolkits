{"paragraphs":[{"text":"%md\n# About\n\n**Lab:** Kerberos\n**Objective:** Master basic Kerberos commands\n**File Locations:**\n```\n```\n\n**Successful Outcome:** Master klist, kinit, kdestrooy\n**Before You Begin:** \n**Related Lessons:** \n\n---","user":"sysadmin","dateUpdated":"2020-05-25T15:34:24+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> Kerberos\n<br  /><strong>Objective:</strong> Master basic Kerberos commands\n<br  /><strong>File Locations:</strong></p>\n<p><strong>Successful Outcome:</strong> Master klist, kinit, kdestrooy\n<br  /><strong>Before You Begin:</strong>\n<br  /><strong>Related Lessons:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590419458672_2045992550","id":"20200501-214558_1717013358","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:24+0000","dateFinished":"2020-05-25T15:34:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:106685"},{"text":"%md\n# Setup\n\n```\n# Note. Recommend not using admin/admin, a more common is kadmin/admin\n\nKDC Host: ad01.cloudair.lan\nRealm Name: CLOUDAIR.NET\nDomains: cloudair.lan,.cloudair.lan\n\nAdmin Host: ad01.cloudair.lan\nAdmin principal: kadmin/admin@CLOUDAIR.LAN\nAdmin password: BadPass%1\n```","user":"sysadmin","dateUpdated":"2020-05-25T15:34:36+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n<pre><code># Note. Recommend not using admin/admin, a more common is kadmin/admin\n\nKDC Host: ad01.cloudair.lan\nRealm Name: CLOUDAIR.NET\nDomains: cloudair.lan,.cloudair.lan\n\nAdmin Host: ad01.cloudair.lan\nAdmin principal: kadmin/admin@CLOUDAIR.LAN\nAdmin password: BadPass%1\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1590419458680_360017324","id":"20200501-215036_1976291396","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:36+0000","dateFinished":"2020-05-25T15:34:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106686"},{"text":"%md\n# Lab","user":"sysadmin","dateUpdated":"2020-05-25T15:17:29+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Lab</h1>\n"}]},"apps":[],"jobName":"paragraph_1590419458681_-2038012588","id":"20200501-215049_96830641","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:17:29+0000","dateFinished":"2020-05-25T15:17:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106687"},{"title":"1 - Open a Terminal","text":"%md\nOpen a terminal\nLogin to admin01\nssh sysadmin@admin01","user":"sysadmin","dateUpdated":"2020-05-25T15:34:40+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Open a terminal\n<br  />Login to admin01\n<br  />ssh sysadmin@admin01</p>\n"}]},"apps":[],"jobName":"paragraph_1590419960889_1223937505","id":"20200525-151920_1806722831","dateCreated":"2020-05-25T15:19:20+0000","dateStarted":"2020-05-25T15:34:40+0000","dateFinished":"2020-05-25T15:34:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106688"},{"title":"2 - Login into master01","text":"%md\nssh master01","user":"sysadmin","dateUpdated":"2020-05-25T15:34:43+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>ssh master01</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458682_338720942","id":"20200501-215353_576205309","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:43+0000","dateFinished":"2020-05-25T15:34:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106689"},{"title":"3 - List the keytabs","text":"%md\nls -la /etc/security/keytabs/","user":"sysadmin","dateUpdated":"2020-05-25T15:34:47+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>ls -la /etc/security/keytabs/</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458682_477176573","id":"20200501-215429_1989694678","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:47+0000","dateFinished":"2020-05-25T15:34:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106690"},{"title":"4 - List the contents of the namenode and hdfs keytabs","text":"%md\nsudo klist -ket /etc/security/keytabs/nn.service.keytab\nsudo klist -ket /etc/security/keytabs/hdfs.headless.keytab","user":"sysadmin","dateUpdated":"2020-05-25T15:34:53+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo klist -ket /etc/security/keytabs/nn.service.keytab\n<br  />sudo klist -ket /etc/security/keytabs/hdfs.headless.keytab</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458683_-1901667537","id":"20200501-215428_1610790154","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:53+0000","dateFinished":"2020-05-25T15:34:53+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106691"},{"title":"5 - Login into kadmin","text":"%md\nsudo kadmin -p kadmin/admin@CLOUDAIR.LAN","user":"sysadmin","dateUpdated":"2020-05-25T15:34:55+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo kadmin -p kadmin/admin@CLOUDAIR.LAN</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458683_265552259","id":"20200501-215427_335267104","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:55+0000","dateFinished":"2020-05-25T15:34:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106692"},{"title":"6 - List principals","text":"%md\nlistprincs","user":"sysadmin","dateUpdated":"2020-05-25T15:34:58+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>listprincs</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458684_1359692352","id":"20200501-215426_1589775587","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:34:58+0000","dateFinished":"2020-05-25T15:34:58+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106693"},{"title":"7 - Adding headless users","text":"%md\naddprinc sysadmin@CLOUDAIR.LAN\naddprinc devuser@CLOUDAIR.LAN\naddprinc akhan@CLOUDAIR.LAN\naddprinc prose@CLOUDAIR.LAN\naddprinc slee@CLOUDAIR.LAN\nlistprincs","user":"sysadmin","dateUpdated":"2020-05-25T15:35:01+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>addprinc sysadmin@CLOUDAIR.LAN\n<br  />addprinc devuser@CLOUDAIR.LAN\n<br  />addprinc akhan@CLOUDAIR.LAN\n<br  />addprinc prose@CLOUDAIR.LAN\n<br  />addprinc slee@CLOUDAIR.LAN\n<br  />listprincs</p>\n"}]},"apps":[],"jobName":"paragraph_1590420351687_-1256544732","id":"20200525-152551_507940617","dateCreated":"2020-05-25T15:25:51+0000","dateStarted":"2020-05-25T15:35:01+0000","dateFinished":"2020-05-25T15:35:01+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106694"},{"title":"8 - Adding a LDAP principal to KDC","text":"%md\naddprinc -x dn=\"uid=rpatel,ou=kerberos,dc=cloudair,dc=lan\"  rpatel\nlistprincs","user":"sysadmin","dateUpdated":"2020-05-25T15:35:23+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>addprinc -x dn=&ldquo;uid=rpatel,ou=kerberos,dc=cloudair,dc=lan&rdquo;  rpatel\n<br  />listprincs</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458685_644770924","id":"20200501-215426_2086589994","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:35:23+0000","dateFinished":"2020-05-25T15:35:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106695"},{"title":"9 - Attempt to execute a HDFS command, this will fail with the Kerberos error","text":"%md\nhdfs -dfs -ls /user","user":"sysadmin","dateUpdated":"2020-05-25T15:35:26+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs -dfs -ls /user</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458692_-1319589627","id":"20200501-215425_268182898","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:35:26+0000","dateFinished":"2020-05-25T15:35:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106696"},{"title":"10 - Kinit as sysadmin","text":"%md\nklist\nkinit\nklist\nkdestroy\nkinit\nklist\n","user":"sysadmin","dateUpdated":"2020-05-25T15:35:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>klist\n<br  />kinit\n<br  />klist\n<br  />kdestroy\n<br  />kinit\n<br  />klist</p>\n"}]},"apps":[],"jobName":"paragraph_1590420555092_1891517378","id":"20200525-152915_1323160068","dateCreated":"2020-05-25T15:29:15+0000","dateStarted":"2020-05-25T15:35:30+0000","dateFinished":"2020-05-25T15:35:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106697"},{"title":"11 - Execute a HDFS command","text":"%md\nhdfs -dfs -ls /user\nhdfs dfs -mkdir /user/sysadmin/books\nhdfs dfs -put /home/sysadmin/data/books/* /user/sysadmin/books\nhdfs dfs -cat /user/sysadmin/books/book07.txt","user":"sysadmin","dateUpdated":"2020-05-25T15:35:33+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs -dfs -ls /user\n<br  />hdfs dfs -mkdir /user/sysadmin/books\n<br  />hdfs dfs -put /home/sysadmin/data/books/* /user/sysadmin/books\n<br  />hdfs dfs -cat /user/sysadmin/books/book07.txt</p>\n"}]},"apps":[],"jobName":"paragraph_1590420618212_-1301964583","id":"20200525-153018_798523450","dateCreated":"2020-05-25T15:30:18+0000","dateStarted":"2020-05-25T15:35:33+0000","dateFinished":"2020-05-25T15:35:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106698"},{"title":"12 - Kinit as HDFS","text":"%md\nsudo -u hdfs kinit -kt /etc/security/keytabs/hdfs.headless.keytab \"hdfs-cloudair\"\nsudo -u hdfs klist","user":"sysadmin","dateUpdated":"2020-05-25T15:35:36+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo -u hdfs kinit -kt /etc/security/keytabs/hdfs.headless.keytab &ldquo;hdfs-cloudair&rdquo;\n<br  />sudo -u hdfs klist</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458693_2125909633","id":"20200501-215424_1808050076","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:35:36+0000","dateFinished":"2020-05-25T15:35:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106699"},{"title":"13 -  Use a HDFS dfsadmin command","text":"%md\nsudo -u hdfs hdfs -dfsadmin -report","user":"sysadmin","dateUpdated":"2020-05-25T15:35:39+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo -u hdfs hdfs -dfsadmin -report</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458694_1155838224","id":"20200501-215423_1579487838","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:35:39+0000","dateFinished":"2020-05-25T15:35:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106700"},{"title":"14 - Check on the Kerberos install for NiFi","text":"%md\nIf NiFi is installed check on the Kerberos setup\nssh flow01\nsudo klist -kt /etc/security/keytabs/nifi.service.keytab\nsudo cat /etc/nifi/conf/nifi.properties | grep kerberos\nsudo tail /etc/nifi/conf/login-identity-providers.xml ","user":"sysadmin","dateUpdated":"2020-05-25T15:35:42+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>If NiFi is installed check on the Kerberos setup\n<br  />ssh flow01\n<br  />sudo klist -kt /etc/security/keytabs/nifi.service.keytab\n<br  />sudo cat /etc/nifi/conf/nifi.properties | grep kerberos\n<br  />sudo tail /etc/nifi/conf/login-identity-providers.xml</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458695_798191537","id":"20200501-215423_235575174","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:35:42+0000","dateFinished":"2020-05-25T15:35:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106701"},{"text":"%md\n# Result\n\n**You have now:** Learned the basic Kerberos commands and how they relate to keytabs","user":"sysadmin","dateUpdated":"2020-05-25T15:36:18+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong> Learned the basic Kerberos commands and how they relate to keytabs</p>\n"}]},"apps":[],"jobName":"paragraph_1590419458695_-1256145832","id":"20200501-215114_1780935962","dateCreated":"2020-05-25T15:10:58+0000","dateStarted":"2020-05-25T15:36:18+0000","dateFinished":"2020-05-25T15:36:18+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:106702"},{"text":"%md\n","user":"sysadmin","dateUpdated":"2020-05-25T15:35:46+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590420946216_1300017000","id":"20200525-153546_660918726","dateCreated":"2020-05-25T15:35:46+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:106703"}],"name":"Admin/01-KerberosCLI","id":"2F8KUW9YY","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"psql:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}