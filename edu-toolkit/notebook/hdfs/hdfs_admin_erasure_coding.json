{"paragraphs":[{"text":"%md\n# About\n\n**Lab:** Configuring HDFS Erasure Coding\n**Objective:** Assign a Erasure Coding policy to an HDFS directory. add data to directory, view EC block groups.\n**File Locations:** N/A\n**Successful Outcome:** The RS-3-2-1024K Erasure Coding policy is assigned to /user/root/archive. Add data file to directory and verify the EC policy is working.\n**Before You Begin:** Start and connect to your classroom lab environment\n**Related Lessons:** *HDFS Erasure Coding*\n\n*** !!! Related Lesson is this lesson? !!! ***\n\n---","user":"devuser","dateUpdated":"2020-05-02T19:37:08+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448034119_-944577123","id":"20200501-214558_1717013358","dateCreated":"2020-05-02T19:33:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:9607"},{"text":"%md\n# Setup","user":"devuser","dateUpdated":"2020-05-02T19:33:54+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448034120_-1575294266","id":"20200501-215036_1976291396","dateCreated":"2020-05-02T19:33:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:9608"},{"text":"%md\n# Lab","user":"devuser","dateUpdated":"2020-05-02T19:33:54+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448034120_-1913149708","id":"20200501-215049_96830641","dateCreated":"2020-05-02T19:33:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:9609"},{"text":"%md\n### Create an HDFS directory and data to use in the lab exercise","user":"devuser","dateUpdated":"2020-05-02T21:19:14+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","editorHide":false,"tableHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Create an HDFS directory and populate it with data</h3>\n"}]},"apps":[],"jobName":"paragraph_1588448247246_440022530","id":"20200502-193727_702368111","dateCreated":"2020-05-02T19:37:27+0000","dateStarted":"2020-05-02T20:38:44+0000","dateFinished":"2020-05-02T20:38:44+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:9610"},{"title":"1 - Create a directory in HDFS","text":"%md\nUse HDFS command-line commands to create an `archive` directory in the root user's HDFS home directory. Verify that the directory was created.","user":"devuser","dateUpdated":"2020-05-03T00:27:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448246576_530174269","id":"20200502-193726_617261832","dateCreated":"2020-05-02T19:37:26+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9611"},{"text":"%sh\nhdfs dfs -mkdir /user/root/archive\nhdfs dfs -ls /user/root","user":"devuser","dateUpdated":"2020-05-02T20:44:29+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448246056_1274584584","id":"20200502-193726_1924002067","dateCreated":"2020-05-02T19:37:26+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9612"},{"text":"%md\n### List and Enable Erasure Coding Policy","user":"devuser","dateUpdated":"2020-05-02T20:44:54+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448245337_-1361524725","id":"20200502-193725_938887274","dateCreated":"2020-05-02T19:37:25+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9613"},{"title":"2 - List available erasure coding policies","text":"%md\nSwitch to the HDFS superuser. List available erasure coding policies by running the command `hdfs ec -listPolicies`.\n\n*** !!! Image here !!! ***","user":"devuser","dateUpdated":"2020-05-03T00:27:26+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448245312_236063985","id":"20200502-193725_751767129","dateCreated":"2020-05-02T19:37:25+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9614"},{"text":"%sh\nsu - hdfs\nhdfs ec -listPolicies","user":"devuser","dateUpdated":"2020-05-02T20:45:24+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448244849_-1040485674","id":"20200502-193724_742436481","dateCreated":"2020-05-02T19:37:24+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9615"},{"title":"3 - Enable RS-3-2-1024k erasure coding policy","text":"%md\nNotice that RS-3-2-1024k policy is disabled by default. Since we have 5 nodes we will need to enable this EC policy in order to set a EC policy on a directory in this cluster. Enable RS-3-2-1024K  erasure coding policy by running the command \n\n```\nhdfs ec -enablePolicy -policy <Policy Name>.\n```\n\n*** !!! Image here !!! ***","user":"devuser","dateUpdated":"2020-05-03T00:27:34+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448244524_2135793886","id":"20200502-193724_1763640905","dateCreated":"2020-05-02T19:37:24+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9616"},{"text":"%sh\nhdfs ec -enablePolicy -policy RS-3-2-1024k","user":"devuser","dateUpdated":"2020-05-02T20:46:40+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448244122_1398464848","id":"20200502-193724_1736782032","dateCreated":"2020-05-02T19:37:24+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9617"},{"text":"%md\n### Assign an Erasure Coding policy to an HDFS directory","user":"devuser","dateUpdated":"2020-05-02T20:57:21+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448243660_1300443510","id":"20200502-193723_1759448179","dateCreated":"2020-05-02T19:37:23+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9618"},{"title":"4 - Set the erasure coding policy on the target directory","text":"%md\nSet the erasure coding policy on the target directory in HDFS by running the command\n\n```\nhdfs ec -setPolicy -path <HDFS Directory Path> -policy <Policy Name>\n```\n\n*** !!! Image here !!! ***","user":"devuser","dateUpdated":"2020-05-03T00:27:38+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":false,"tableHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Set the erasure coding policy on the target directory in HDFS by running the command <code>hdfs ec -setPolicy -path *&lt;HDFS Directory Path&gt;* -policy *&lt;Policy Name&gt;*</code></p>\n<pre><code>hdfs ec -setPolicy -path &lt;HDFS Directory Path&gt; -policy &lt;Policy Name&gt;\n</code></pre>\n<p><strong><em> !!! Image here !!! </em></strong></p>\n"}]},"apps":[],"jobName":"paragraph_1588448243116_2106073047","id":"20200502-193723_86828422","dateCreated":"2020-05-02T19:37:23+0000","dateStarted":"2020-05-02T21:07:16+0000","dateFinished":"2020-05-02T21:07:16+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:9619"},{"text":"%md\nhdfs ec -setPolicy -path /user/root/archive -policy RS-3-2-1024k","user":"devuser","dateUpdated":"2020-05-02T20:48:29+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448241167_-280289220","id":"20200502-193721_285816317","dateCreated":"2020-05-02T19:37:21+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9620"},{"title":"5 - Exit superuser and copy data into the archive directory","text":"%md\nExit HDFS superuser and as the root user copy data in the `/user/root/archive directory`. \n\n*** !!! Image here (but it's just the output from `hdfs -ls`) !!! ***","user":"devuser","dateUpdated":"2020-05-03T00:27:46+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448240827_-1596502311","id":"20200502-193720_1918644878","dateCreated":"2020-05-02T19:37:20+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9621"},{"text":"%sh\nexit\nhdfs dfs -put /var/log/messages /user/root/archive/ec-file1\nhdfs dfs -ls /user/root/archive","user":"devuser","dateUpdated":"2020-05-02T20:54:02+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448240438_-1661702097","id":"20200502-193720_1851912905","dateCreated":"2020-05-02T19:37:20+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9622"},{"title":"6 - List the archive directory","text":"%md\nList the `/user/root/archive` directory.\n\n** !!! Image of output !!! ***","user":"devuser","dateUpdated":"2020-05-03T00:27:49+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448239996_-124419354","id":"20200502-193719_1559585864","dateCreated":"2020-05-02T19:37:19+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9623"},{"text":"%sh\nhdfs dfs -ls /user/root/archive","user":"devuser","dateUpdated":"2020-05-02T20:55:28+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448239612_-1130406234","id":"20200502-193719_1330960729","dateCreated":"2020-05-02T19:37:19+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9624"},{"text":"%md\n### Examine the HDFS filesystem","user":"devuser","dateUpdated":"2020-05-02T20:59:08+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448239177_-968071736","id":"20200502-193719_532721375","dateCreated":"2020-05-02T19:37:19+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9625"},{"title":"7 - Examine the HDFS filesystem","text":"%md\nRun the HDFS fsck utility to display the replicated block and the erasure coded block groups for the `/user/root/archive` directory.     ","user":"devuser","dateUpdated":"2020-05-03T00:27:56+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448238753_-1484756464","id":"20200502-193718_455807258","dateCreated":"2020-05-02T19:37:18+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9626"},{"text":"%sh\nhdfs fsck /user/root/archive","user":"devuser","dateUpdated":"2020-05-02T20:59:32+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448238256_79859087","id":"20200502-193718_1574498163","dateCreated":"2020-05-02T19:37:18+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9627"},{"text":"%md\n*** !!! Image of output !!! ***","user":"devuser","dateUpdated":"2020-05-02T21:00:23+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588453206180_-27111207","id":"20200502-210006_301316011","dateCreated":"2020-05-02T21:00:06+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:9628"},{"text":"%md\n# Result\n\n**You have now:** The HDFS erasure coding policies available was listed to determine their state. The RS-3-2-1024k policy was enabled and was assigned to a HDFS directory.  The EC policy RS-3-2-1024k was assigned to the HDFS directory `/user/root/archive`.  Data was loaded to that directory and thru the use of HDFS FSCK command we checked that the file was indeed using the EC policy assigned.","user":"devuser","dateUpdated":"2020-05-02T21:01:00+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1588448034121_1236382904","id":"20200501-215114_1780935962","dateCreated":"2020-05-02T19:33:54+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:9629"}],"name":"/ENTR/HDFSErasureCoding","id":"2F8KKG6HA","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}