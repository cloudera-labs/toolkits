{"paragraphs":[{"text":"%md\n# About This Exercise\n**Title:** Create the HDFS encrypted directory cloudhr tenant\n**Objectives:** \n            Create HDFS directory for cloudhr \n            Assign a key for an encryption zone \n            Create the required file system for Hive databases\n**File locations:** none\n**Successful outcome:** Create tenant file system for cloudhr\n**Before you begin:** N/A\n**Related lessons:** Ranger\n\n---","user":"allan_admin","dateUpdated":"2022-04-03T15:44:29-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About This Exercise</h1>\n<p><strong>Title:</strong> Create the HDFS encrypted directory cloudhr tenant\n<br  /><strong>Objectives:</strong></p>\n<pre><code>        Create HDFS directory for cloudhr \n        Assign a key for an encryption zone \n        Create the required file system for Hive databases\n</code></pre>\n<p><strong>File locations:</strong> none\n<br  /><strong>Successful outcome:</strong> Create tenant file system for cloudhr\n<br  /><strong>Before you begin:</strong> N/A\n<br  /><strong>Related lessons:</strong> Ranger</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1649025869200_-2005864924","id":"20181126-092644_1457476546","dateCreated":"2022-04-03T15:44:29-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:720"},{"text":"%md\n# Setup","user":"allan_admin","dateUpdated":"2022-04-03T15:44:29-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n"}]},"apps":[],"jobName":"paragraph_1649025869201_-1115882588","id":"20181201-044336_178705192","dateCreated":"2022-04-03T15:44:29-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:721"},{"text":"%md\n\n# Exercise","user":"allan_admin","dateUpdated":"2022-04-03T15:44:29-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Exercise</h1>\n"}]},"apps":[],"jobName":"paragraph_1649025869201_1554185345","id":"20211016-184306_110599744","dateCreated":"2022-04-03T15:44:29-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:722"},{"title":"1 - Verify the list of keys","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hadoop key list -metadata\"","user":"allan_admin","dateUpdated":"2022-04-03T15:51:01-0700","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Listing keys for KeyProvider: org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@7fee8714\ncloudsale_key : cipher: AES/CTR/NoPadding, length: 128, description: Encryption key for cloudsale, created: Sun Apr 03 15:28:14 PDT 2022, version: 1, attributes: [key.acl.name=cloudsale_key] \ncloudhr_key : cipher: AES/CTR/NoPadding, length: 128, description: Encryption key for cloudhr, created: Sun Apr 03 15:28:49 PDT 2022, version: 1, attributes: [key.acl.name=cloudhr_key] \nhive-key : cipher: AES/CTR/NoPadding, length: 128, description: , created: Fri Apr 01 04:41:26 PDT 2022, version: 1, attributes: [key.acl.name=hive-key] \n"}]},"apps":[],"jobName":"paragraph_1649025869202_-571143794","id":"20211016-184338_1701748903","dateCreated":"2022-04-03T15:44:29-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:723","dateFinished":"2022-04-03T15:51:07-0700","dateStarted":"2022-04-03T15:51:01-0700"},{"title":"2 - Create tenant directories for cloudhr","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudhr\" \necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -chown hdfs:supergroup /tenant\"\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -chown hive:hive /tenant/cloudhr\"\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -ls /tenant\"","user":"allan_admin","dateUpdated":"2022-04-03T15:51:09-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Password: Found 2 items\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale\n"}]},"apps":[],"jobName":"paragraph_1649025869202_1732417885","id":"20211016-184631_2104056715","dateCreated":"2022-04-03T15:44:29-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:724","dateFinished":"2022-04-03T15:51:22-0700","dateStarted":"2022-04-03T15:51:09-0700"},{"title":"3 - Assign a key to the encryption zone ","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs crypto -createZone -keyName cloudhr_key -path /tenant/cloudhr\"\n","user":"allan_admin","dateUpdated":"2022-04-03T15:51:27-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Added encryption zone /tenant/cloudhr\n"}]},"apps":[],"jobName":"paragraph_1649025869202_-102350280","id":"20211016-184920_60711222","dateCreated":"2022-04-03T15:44:29-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:725","dateFinished":"2022-04-03T15:51:32-0700","dateStarted":"2022-04-03T15:51:27-0700"},{"title":"4 - List the Encryption Zones","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs crypto -listZones\"","user":"allan_admin","dateUpdated":"2022-04-03T15:51:34-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: /tenant/cloudsale  cloudsale_key \n/tenant/cloudhr    cloudhr_key   \n\n"}]},"apps":[],"jobName":"paragraph_1649025869203_-3858927","id":"20211016-193130_281608588","dateCreated":"2022-04-03T15:44:29-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:726","dateFinished":"2022-04-03T15:51:38-0700","dateStarted":"2022-04-03T15:51:34-0700"},{"title":"5 - Create Hive directories for cloudhr","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudhr/data\"\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudhr/warehouse/tablespace/external/hive\"\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudhrwarehouse/tablespace/managed/hive\"\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -chown -R hive:hive /tenant/cloudhr\"\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -ls -R /tenant/cloudhr\"","user":"allan_admin","dateUpdated":"2022-04-03T15:51:43-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Password: Password: drwxrwxrwt   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr/.Trash\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr/data\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr/warehouse\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr/warehouse/tablespace\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr/warehouse/tablespace/external\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:51 /tenant/cloudhr/warehouse/tablespace/external/hive\n"}]},"apps":[],"jobName":"paragraph_1649025869203_-575655712","id":"20211016-193527_2022456863","dateCreated":"2022-04-03T15:44:29-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:727","dateFinished":"2022-04-03T15:51:59-0700","dateStarted":"2022-04-03T15:51:43-0700"},{"text":"%md\n\n# Reset\n","user":"allan_admin","dateUpdated":"2022-04-03T15:44:29-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Reset</h1>\n"}]},"apps":[],"jobName":"paragraph_1649025869204_-2014901731","id":"20210503-201327_1691139602","dateCreated":"2022-04-03T15:44:29-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:728"},{"title":"A - Delete the tenant directory cloudhr","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c 'hdfs dfs -rm -r -skipTrash /tenant/cloudhr'\n","user":"allan_admin","dateUpdated":"2022-04-03T15:50:50-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Deleted /tenant/cloudfin\nDeleted /tenant/cloudhr\n"}]},"apps":[],"jobName":"paragraph_1649025869204_29775100","id":"20210503-201344_78143625","dateCreated":"2022-04-03T15:44:29-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:729"},{"text":"%angular\n","user":"allan_admin","dateUpdated":"2022-04-03T15:44:29-0700","config":{"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1649025869210_1234758181","id":"20191113-001039_505978317","dateCreated":"2022-04-03T15:44:29-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:730"}],"name":"hdfs/encrypt_hdfs_cloudhr","id":"2GZ4Z2BFZ","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"livy:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}