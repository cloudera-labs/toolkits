<topology>
   <gateway>
        <provider>
                <role>webappsec</role>
                <name>WebAppSec</name>
                <enabled>true</enabled>
                <param>
                        <name>xframe.options.enabled</name>
                        <value>true</value>
                </param>
        </provider>

        <provider>
                <role>authentication</role>
                <name>ShiroProvider</name>
                <enabled>true</enabled>
                <param>
                        <name>sessionTimeout</name>
                        <value>30</value>
                </param>
                <param>
                        <name>redirectToUrl</name>
                        <value>/gateway/knoxsso/knoxauth/login.html</value>
                </param>
                <param>
                        <name>restrictedCookies</name>
                        <value>rememberme,WWW-Authenticate</value>
                </param>
                <param>
                        <name>main.ldapRealm</name>
                        <value>org.apache.hadoop.gateway.shirorealm.KnoxLdapRealm</value>
                </param>
                <param>
                        <name>main.ldapContextFactory</name>
                        <value>org.apache.hadoop.gateway.shirorealm.KnoxLdapContextFactory</value>
                </param>
                <param>
                        <name>main.ldapRealm.contextFactory</name>
                        <value>$ldapContextFactory</value>
                </param>
                <param>
                        <name>main.ldapRealm.contextFactory.url</name>
                        <value>ldap://infra01.cloudair.lan:389</value>
                </param>
                <param>
                        <name>main.ldapRealm.userDnTemplate</name>
                        <value>uid={0},ou=users,dc=cloudair,dc=lan</value>
                </param>
                <param>
                        <name>main.ldapRealm.authenticationCachingEnabled</name>
                        <value>false</value>
                </param>
                <param>
                        <name>main.ldapRealm.contextFactory.authenticationMechanism</name>
                        <value>simple</value>
                </param>
                <param>
                        <name>urls./**</name>
                        <value>authcBasic</value>
                </param>
        </provider>

        <provider>
                <role>identity-assertion</role>
                <name>Default</name>
                <enabled>true</enabled>
        </provider>

        <provider>
                <role>hostmap</role>
                <name>static</name>
                <enabled>true</enabled>
                <param>
                        <name>name</name>
                        <value>client02,client02.cloudair.lan</value>
                </param>
        </provider>
   </gateway>

        <application>
                <name>knoxauth</name>
        </application>

        <service>
                <role>KNOXSSO</role>
                <param>
                        <name>knoxsso.cookie.secure.only</name>
                        <value>false</value>
                </param>
                <param>
                        <name>knoxsso.token.ttl</name>
                        <value>36000000</value>
                </param>
                <param>
                        <name>knoxsso.redirect.whitelist.regex</name>
                        <value>.*$</value>
                </param>
        </service>
     <service>
        <role>NIFI</role>
        <url>https://flow01.cloudair.lan:9091</url>
        <param name="useTwoWaySsl" value="true"/>
     </service>
</topology>
