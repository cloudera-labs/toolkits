{"paragraphs":[{"text":"%md\n# About\n\n**Lab:** Kerberos\n**Objective:** Master basic Kerberos commands\n**File Locations:**\n```\n```\n\n**Successful Outcome:** Master klist, kinit, kdestrooy\n**Before You Begin:** \n**Related Lessons:** \n\n---","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> Kerberos\n<br  /><strong>Objective:</strong> Master basic Kerberos commands\n<br  /><strong>File Locations:</strong></p>\n<p><strong>Successful Outcome:</strong> Master klist, kinit, kdestrooy\n<br  /><strong>Before You Begin:</strong>\n<br  /><strong>Related Lessons:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1676162903835_869283935","id":"20200501-214558_1717013358","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:29030"},{"text":"%md\n# Setup\n\n```\n# Note. Recommend not using admin/admin, a more common is kadmin/admin\n\nKDC Host: ad01.cloudair.lan\nRealm Name: CLOUDAIR.NET\nDomains: cloudair.lan,.cloudair.lan\n\nAdmin Host: ad01.cloudair.lan\nAdmin principal: kadmin/admin@CLOUDAIR.LAN\nAdmin password: BadPass%1\n```","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n<pre><code># Note. Recommend not using admin/admin, a more common is kadmin/admin\n\nKDC Host: ad01.cloudair.lan\nRealm Name: CLOUDAIR.NET\nDomains: cloudair.lan,.cloudair.lan\n\nAdmin Host: ad01.cloudair.lan\nAdmin principal: kadmin/admin@CLOUDAIR.LAN\nAdmin password: BadPass%1\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1676162903835_-2102430792","id":"20200501-215036_1976291396","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29031"},{"text":"%md\n# Lab","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Lab</h1>\n"}]},"apps":[],"jobName":"paragraph_1676162903835_-1242300925","id":"20200501-215049_96830641","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29032"},{"title":"1 - Open a Terminal","text":"%md\nOpen a terminal\nLogin to admin01\nssh sysadmin@admin01","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Open a terminal\n<br  />Login to admin01\n<br  />ssh sysadmin@admin01</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903835_-1530695399","id":"20200525-151920_1806722831","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29033"},{"title":"2 - Login into master01","text":"%md\nssh master01","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>ssh master01</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903836_1616967543","id":"20200501-215353_576205309","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29034"},{"title":"3 - List the keytabs","text":"%md\nls -la /etc/security/keytabs/","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>ls -la /etc/security/keytabs/</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903836_-1562316856","id":"20200501-215429_1989694678","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29035"},{"title":"4 - List the contents of the namenode and hdfs keytabs","text":"%md\nsudo klist -ket /etc/security/keytabs/nn.service.keytab\nsudo klist -ket /etc/security/keytabs/hdfs.headless.keytab","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo klist -ket /etc/security/keytabs/nn.service.keytab\n<br  />sudo klist -ket /etc/security/keytabs/hdfs.headless.keytab</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903836_-1899875821","id":"20200501-215428_1610790154","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29036"},{"title":"5 - Login into kadmin","text":"%md\nsudo kadmin -p kadmin/admin@CLOUDAIR.LAN","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo kadmin -p kadmin/admin@CLOUDAIR.LAN</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903836_634481713","id":"20200501-215427_335267104","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29037"},{"title":"6 - List principals","text":"%md\nlistprincs","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>listprincs</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903837_-22020314","id":"20200501-215426_1589775587","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29038"},{"title":"7 - Adding headless users","text":"%md\naddprinc sysadmin@CLOUDAIR.LAN\naddprinc devuser@CLOUDAIR.LAN\naddprinc akhan@CLOUDAIR.LAN\naddprinc prose@CLOUDAIR.LAN\naddprinc slee@CLOUDAIR.LAN\nlistprincs","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>addprinc sysadmin@CLOUDAIR.LAN\n<br  />addprinc devuser@CLOUDAIR.LAN\n<br  />addprinc akhan@CLOUDAIR.LAN\n<br  />addprinc prose@CLOUDAIR.LAN\n<br  />addprinc slee@CLOUDAIR.LAN\n<br  />listprincs</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903837_-899697639","id":"20200525-152551_507940617","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29039"},{"title":"8 - Adding a LDAP principal to KDC","text":"%md\naddprinc -x dn=\"uid=rpatel,ou=kerberos,dc=cloudair,dc=lan\"  rpatel\nlistprincs","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>addprinc -x dn=&ldquo;uid=rpatel,ou=kerberos,dc=cloudair,dc=lan&rdquo;  rpatel\n<br  />listprincs</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903837_1894664030","id":"20200501-215426_2086589994","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29040"},{"title":"9 - Attempt to execute a HDFS command, this will fail with the Kerberos error","text":"%md\nhdfs -dfs -ls /user","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs -dfs -ls /user</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903837_191030829","id":"20200501-215425_268182898","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29041"},{"title":"10 - Kinit as sysadmin","text":"%md\nklist\nkinit\nklist\nkdestroy\nkinit\nklist\n","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>klist\n<br  />kinit\n<br  />klist\n<br  />kdestroy\n<br  />kinit\n<br  />klist</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903838_-1414286194","id":"20200525-152915_1323160068","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29042"},{"title":"11 - Execute a HDFS command","text":"%md\nhdfs -dfs -ls /user\nhdfs dfs -mkdir /user/sysadmin/books\nhdfs dfs -put /home/sysadmin/data/books/* /user/sysadmin/books\nhdfs dfs -cat /user/sysadmin/books/book07.txt","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs -dfs -ls /user\n<br  />hdfs dfs -mkdir /user/sysadmin/books\n<br  />hdfs dfs -put /home/sysadmin/data/books/* /user/sysadmin/books\n<br  />hdfs dfs -cat /user/sysadmin/books/book07.txt</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903838_-1801588043","id":"20200525-153018_798523450","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29043"},{"title":"12 - Kinit as HDFS","text":"%md\nsudo -u hdfs kinit -kt /etc/security/keytabs/hdfs.headless.keytab \"hdfs-cloudair\"\nsudo -u hdfs klist","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo -u hdfs kinit -kt /etc/security/keytabs/hdfs.headless.keytab &ldquo;hdfs-cloudair&rdquo;\n<br  />sudo -u hdfs klist</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903838_-381511248","id":"20200501-215424_1808050076","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29044"},{"title":"13 -  Use a HDFS dfsadmin command","text":"%md\nsudo -u hdfs hdfs -dfsadmin -report","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo -u hdfs hdfs -dfsadmin -report</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903838_-2055727799","id":"20200501-215423_1579487838","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29045"},{"title":"14 - Check on the Kerberos install for NiFi","text":"%md\nIf NiFi is installed check on the Kerberos setup\nssh flow01\nsudo klist -kt /etc/security/keytabs/nifi.service.keytab\nsudo cat /etc/nifi/conf/nifi.properties | grep kerberos\nsudo tail /etc/nifi/conf/login-identity-providers.xml ","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>If NiFi is installed check on the Kerberos setup\n<br  />ssh flow01\n<br  />sudo klist -kt /etc/security/keytabs/nifi.service.keytab\n<br  />sudo cat /etc/nifi/conf/nifi.properties | grep kerberos\n<br  />sudo tail /etc/nifi/conf/login-identity-providers.xml</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903839_98812466","id":"20200501-215423_235575174","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29046"},{"text":"%md\n# Result\n\n**You have now:** Learned the basic Kerberos commands and how they relate to keytabs","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong> Learned the basic Kerberos commands and how they relate to keytabs</p>\n"}]},"apps":[],"jobName":"paragraph_1676162903839_-1794491913","id":"20200501-215114_1780935962","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29047"},{"text":"%md\n","user":"allan_admin","dateUpdated":"2023-02-11T16:48:23-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676162903839_-1693219321","id":"20200525-153546_660918726","dateCreated":"2023-02-11T16:48:23-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:29048"}],"name":"kerberos/cli_kerberos","id":"2HSWFCVF5","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"livy:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}