{"paragraphs":[{"text":"%md\n# About This Exercise\n**Title:** Create the HDFS encrypted directory cloudsale tenant\n**Objectives:** \n            Create HDFS directory for cloudsale \n            Assign a key for an encryption zone \n            Create the required file system for Hive databases\n**File locations:** none\n**Successful outcome:** Create tenant file system for cloudsale\n**Before you begin:** N/A\n**Related lessons:** Ranger\n\n---","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About This Exercise</h1>\n<p><strong>Title:</strong> Create the HDFS encrypted directory cloudsale tenant\n<br  /><strong>Objectives:</strong></p>\n<pre><code>        Create HDFS directory for cloudsale \n        Assign a key for an encryption zone \n        Create the required file system for Hive databases\n</code></pre>\n<p><strong>File locations:</strong> none\n<br  /><strong>Successful outcome:</strong> Create tenant file system for cloudsale\n<br  /><strong>Before you begin:</strong> N/A\n<br  /><strong>Related lessons:</strong> Ranger</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1676161532354_-270809098","id":"20181126-092644_1457476546","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:667"},{"text":"%md\n# Setup","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n"}]},"apps":[],"jobName":"paragraph_1676161532357_-1468996059","id":"20181201-044336_178705192","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:668"},{"text":"%md\n\n# Exercise","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Exercise</h1>\n"}]},"apps":[],"jobName":"paragraph_1676161532358_1542646857","id":"20211016-184306_110599744","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:669"},{"title":"1 - Verify the list of keys","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hadoop key list -metadata\"","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Listing keys for KeyProvider: org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@7fee8714\ncloudsale_key : cipher: AES/CTR/NoPadding, length: 128, description: Encryption key for cloudsale, created: Sun Apr 03 15:28:14 PDT 2022, version: 1, attributes: [key.acl.name=cloudsale_key] \ncloudhr_key : cipher: AES/CTR/NoPadding, length: 128, description: Encryption key for cloudhr, created: Sun Apr 03 15:28:49 PDT 2022, version: 1, attributes: [key.acl.name=cloudhr_key] \nhive-key : cipher: AES/CTR/NoPadding, length: 128, description: , created: Fri Apr 01 04:41:26 PDT 2022, version: 1, attributes: [key.acl.name=hive-key] \n"}]},"apps":[],"jobName":"paragraph_1676161532358_-2099794455","id":"20211016-184338_1701748903","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:670"},{"title":"2 - Create tenant directories for cloudsale","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudsale\" \necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -chown hdfs:supergroup /tenant\"\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -chown hive:hive /tenant/cloudsale\"\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -ls /tenant\"","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Password: Found 1 items\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:47 /tenant/cloudsale\n"}]},"apps":[],"jobName":"paragraph_1676161532358_2102721984","id":"20211016-184631_2104056715","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:671"},{"title":"3 - Assign a key to the encryption zone ","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs crypto -createZone -keyName cloudsale_key -path /tenant/cloudsale\"\n","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Added encryption zone /tenant/cloudsale\n"}]},"apps":[],"jobName":"paragraph_1676161532358_1842833291","id":"20211016-184920_60711222","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:672"},{"title":"4 - List the Encryption Zones","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs crypto -listZones\"","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: /tenant/cloudsale  cloudsale_key \n\n"}]},"apps":[],"jobName":"paragraph_1676161532358_136203430","id":"20211016-193130_281608588","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:673"},{"title":"5 - Create Hive directories for cloudsale","text":"%sh\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudsale/data\"\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudsale/warehouse/tablespace/external/hive\"\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -mkdir -p /tenant/cloudsale/warehouse/tablespace/managed/hive\"\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -chown -R hive:hive /tenant/cloudsale\"\n\necho BadPass@1 | su -l allan_admin -c \"hdfs dfs -ls -R /tenant/cloudsale\"","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Password: Password: drwxrwxrwt   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/.Trash\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/data\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/warehouse\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/warehouse/tablespace\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/warehouse/tablespace/external\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/warehouse/tablespace/external/hive\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/warehouse/tablespace/managed\ndrwxr-xr-x   - hive hive          0 2022-04-03 15:48 /tenant/cloudsale/warehouse/tablespace/managed/hive\n"}]},"apps":[],"jobName":"paragraph_1676161532359_505884626","id":"20211016-193527_2022456863","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:674"},{"text":"%md\n\n# Reset\n","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Reset</h1>\n"}]},"apps":[],"jobName":"paragraph_1676161532359_-1250653903","id":"20210503-201327_1691139602","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:675"},{"title":"A - Delete the tenant directory cloudsale","text":"%sh\n\n# echo BadPass@1 | su -l allan_admin -c 'hdfs dfs -rm -r -skipTrash /tenant/cloudsale'\n","user":"allan_admin","dateUpdated":"2023-02-12T08:30:41-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Deleted /tenant/cloudfin\nDeleted /tenant/cloudhr\n"}]},"apps":[],"jobName":"paragraph_1676161532359_15917023","id":"20210503-201344_78143625","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:676"},{"text":"%angular\n","user":"allan_admin","dateUpdated":"2023-02-11T16:25:32-0800","config":{"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161532359_-1665800420","id":"20191113-001039_505978317","dateCreated":"2023-02-11T16:25:32-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:677"}],"name":"cloudsale/encrypt_hdfs_cloudsale","id":"2HUKYBMDV","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"livy:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}