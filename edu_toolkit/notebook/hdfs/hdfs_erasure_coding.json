{"paragraphs":[{"text":"%md\n# About\n\n**Lab:** Configuring HDFS Erasure Coding\n**Objective:** Assign a Erasure Coding policy to an HDFS directory. add data to directory, view EC block groups.\n**File Locations:** N/A\n**Successful Outcome:** The RS-3-2-1024K Erasure Coding policy is assigned to /user/root/archive. Add data file to directory and verify the EC policy is working.\n**Before You Begin:** Start and connect to your classroom lab environment\n**Related Lessons:** *HDFS Erasure Coding*\n\n---","user":"allan_admin","dateUpdated":"2023-02-11T17:08:57-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483744_1375619635","id":"20200501-214558_1717013358","dateCreated":"2023-02-11T16:24:43-0800","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:65932","dateFinished":"2023-02-11T17:08:57-0800","dateStarted":"2023-02-11T17:08:57-0800","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>About</h1>\n<p><strong>Lab:</strong> Configuring HDFS Erasure Coding<br />\n<strong>Objective:</strong> Assign a Erasure Coding policy to an HDFS directory. add data to directory, view EC block groups.<br />\n<strong>File Locations:</strong> N/A<br />\n<strong>Successful Outcome:</strong> The RS-3-2-1024K Erasure Coding policy is assigned to /user/root/archive. Add data file to directory and verify the EC policy is working.<br />\n<strong>Before You Begin:</strong> Start and connect to your classroom lab environment<br />\n<strong>Related Lessons:</strong> <em>HDFS Erasure Coding</em></p>\n<hr />\n\n</div>"}]}},{"text":"%md\n# Setup","user":"allan_admin","dateUpdated":"2023-02-11T17:09:02-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483745_-1068410821","id":"20200501-215036_1976291396","dateCreated":"2023-02-11T16:24:43-0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:65933","dateFinished":"2023-02-11T17:09:02-0800","dateStarted":"2023-02-11T17:09:02-0800","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Setup</h1>\n\n</div>"}]}},{"text":"%md\n# Lab","user":"allan_admin","dateUpdated":"2023-02-11T17:09:05-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483745_2054002622","id":"20200501-215049_96830641","dateCreated":"2023-02-11T16:24:43-0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:65934","dateFinished":"2023-02-11T17:09:05-0800","dateStarted":"2023-02-11T17:09:05-0800","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Lab</h1>\n\n</div>"}]}},{"text":"%md\n### Create an HDFS directory and data to use in the lab exercise","user":"allan_admin","dateUpdated":"2023-02-11T17:09:07-0800","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Create an HDFS directory and data to use in the lab exercise</h3>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1676161483745_-1154024739","id":"20200502-193727_702368111","dateCreated":"2023-02-11T16:24:43-0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:65935","dateFinished":"2023-02-11T17:09:08-0800","dateStarted":"2023-02-11T17:09:07-0800"},{"title":"1 - Create a directory in HDFS","text":"%md\nUse HDFS command-line commands to create an `archive` directory in the root user's HDFS home directory. Verify that the directory was created.","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483746_-1867286251","id":"20200502-193726_617261832","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65936"},{"text":"%sh\nhdfs dfs -mkdir /user/root/archive\nhdfs dfs -ls /user/root","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483746_160775706","id":"20200502-193726_1924002067","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65937"},{"text":"%md\n### List and Enable Erasure Coding Policy","user":"allan_admin","dateUpdated":"2023-02-11T17:09:11-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483746_-1519576965","id":"20200502-193725_938887274","dateCreated":"2023-02-11T16:24:43-0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:65938","dateFinished":"2023-02-11T17:09:11-0800","dateStarted":"2023-02-11T17:09:11-0800","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>List and Enable Erasure Coding Policy</h3>\n\n</div>"}]}},{"title":"2 - List available erasure coding policies","text":"%md\nSwitch to the HDFS superuser. List available erasure coding policies by running the command `hdfs ec -listPolicies`.\n\n*** !!! Image here !!! ***","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483746_-1905281236","id":"20200502-193725_751767129","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65939"},{"text":"%sh\nsu - hdfs\nhdfs ec -listPolicies","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483747_1741037010","id":"20200502-193724_742436481","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65940"},{"title":"3 - Enable RS-3-2-1024k erasure coding policy","text":"%md\nNotice that RS-3-2-1024k policy is disabled by default. Since we have 5 nodes we will need to enable this EC policy in order to set a EC policy on a directory in this cluster. Enable RS-3-2-1024K  erasure coding policy by running the command \n\n```\nhdfs ec -enablePolicy -policy <Policy Name>.\n```\n\n*** !!! Image here !!! ***","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483748_7233097","id":"20200502-193724_1763640905","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65941"},{"text":"%sh\nhdfs ec -enablePolicy -policy RS-3-2-1024k","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483749_1922164186","id":"20200502-193724_1736782032","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65942"},{"text":"%md\n### Assign an Erasure Coding policy to an HDFS directory","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483751_1777728359","id":"20200502-193723_1759448179","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65943"},{"title":"4 - Set the erasure coding policy on the target directory","text":"%md\nSet the erasure coding policy on the target directory in HDFS by running the command\n\n```\nhdfs ec -setPolicy -path <HDFS Directory Path> -policy <Policy Name>\n```\n\n*** !!! Image here !!! ***","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Set the erasure coding policy on the target directory in HDFS by running the command <code>hdfs ec -setPolicy -path *&lt;HDFS Directory Path&gt;* -policy *&lt;Policy Name&gt;*</code></p>\n<pre><code>hdfs ec -setPolicy -path &lt;HDFS Directory Path&gt; -policy &lt;Policy Name&gt;\n</code></pre>\n<p><strong><em> !!! Image here !!! </em></strong></p>\n"}]},"apps":[],"jobName":"paragraph_1676161483751_-1147071566","id":"20200502-193723_86828422","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65944"},{"text":"%md\nhdfs ec -setPolicy -path /user/root/archive -policy RS-3-2-1024k","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483752_-126957552","id":"20200502-193721_285816317","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65945"},{"title":"5 - Exit superuser and copy data into the archive directory","text":"%md\nExit HDFS superuser and as the root user copy data in the `/user/root/archive directory`. \n\n*** !!! Image here (but it's just the output from `hdfs -ls`) !!! ***","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483752_1490810481","id":"20200502-193720_1918644878","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65946"},{"text":"%sh\nexit\nhdfs dfs -put /var/log/messages /user/root/archive/ec-file1\nhdfs dfs -ls /user/root/archive","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483752_328874725","id":"20200502-193720_1851912905","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65947"},{"title":"6 - List the archive directory","text":"%md\nList the `/user/root/archive` directory.\n\n** !!! Image of output !!! ***","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483753_-39623213","id":"20200502-193719_1559585864","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65948"},{"text":"%sh\nhdfs dfs -ls /user/root/archive","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483753_1913027055","id":"20200502-193719_1330960729","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65949"},{"text":"%md\n### Examine the HDFS filesystem","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483754_471206898","id":"20200502-193719_532721375","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65950"},{"title":"7 - Examine the HDFS filesystem","text":"%md\nRun the HDFS fsck utility to display the replicated block and the erasure coded block groups for the `/user/root/archive` directory.     ","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483755_-1960463006","id":"20200502-193718_455807258","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65951"},{"text":"%sh\nhdfs fsck /user/root/archive","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483755_-1320571567","id":"20200502-193718_1574498163","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65952"},{"text":"%md\n*** !!! Image of output !!! ***","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483755_-1146056155","id":"20200502-210006_301316011","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65953"},{"text":"%md\n# Result\n\n**You have now:** The HDFS erasure coding policies available was listed to determine their state. The RS-3-2-1024k policy was enabled and was assigned to a HDFS directory.  The EC policy RS-3-2-1024k was assigned to the HDFS directory `/user/root/archive`.  Data was loaded to that directory and thru the use of HDFS FSCK command we checked that the file was indeed using the EC policy assigned.","user":"allan_admin","dateUpdated":"2023-02-11T16:24:43-0800","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1676161483756_1087382450","id":"20200501-215114_1780935962","dateCreated":"2023-02-11T16:24:43-0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:65954"}],"name":"hdfs/erasure_coding","id":"2HSKA7S8E","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"livy:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}