{"paragraphs":[{"text":"%md\n# About This Exercise\n**Title:** Create an HDFS encryption zone for Hive. \n**Objectives:** \n            Create HDFS directory for Hive \n            Assign a key for an encryption zone \n            Create the required file system for Hive databases\n**File locations:** none\n**Successful outcome:** Create HDFS encrypted file system for Hive\n**Before you begin:** N/A\n**Related lessons:** Ranger\n\n---","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About This Exercise</h1>\n<p><strong>Title:</strong> Create an HDFS encryption zone for Hive.\n<br  /><strong>Objectives:</strong></p>\n<pre><code>        Create HDFS directory for Hive \n        Assign a key for an encryption zone \n        Create the required file system for Hive databases\n</code></pre>\n<p><strong>File locations:</strong> none\n<br  /><strong>Successful outcome:</strong> Create HDFS encrypted file system for Hive\n<br  /><strong>Before you begin:</strong> N/A\n<br  /><strong>Related lessons:</strong> Ranger</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1654369718934_-520779731","id":"20181126-092644_1457476546","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:143"},{"text":"%md\n# Setup","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n"}]},"apps":[],"jobName":"paragraph_1654369718935_1876822470","id":"20181201-044336_178705192","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:144"},{"text":"%md\n\n# Exercise","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Exercise</h1>\n"}]},"apps":[],"jobName":"paragraph_1654369718936_2056425202","id":"20211016-184306_110599744","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:145"},{"title":"1 - Verify the list of encryption keys","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hadoop key list -metadata\"","user":"allan_admin","dateUpdated":"2022-06-04T12:08:58-0700","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"INCOMPLETE","msg":[{"type":"TEXT","data":"Password: "},{"type":"TEXT","data":"Paragraph received a SIGTERM\nExitValue: 143"}]},"apps":[],"jobName":"paragraph_1654369718936_-1742069077","id":"20211016-184338_1701748903","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:08:58-0700","dateFinished":"2022-06-04T12:09:04-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:146"},{"title":"2 - Create bak directory and move tablespace directory to backup location","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -mkdir /warehouse/bak\" \necho BadPass@1 | su - allan_admin -c \"hdfs dfs -mv /warehouse/tablespace /warehouse/bak/\" \n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -ls /warehouse/bak/tablespace\" ","user":"allan_admin","dateUpdated":"2022-06-04T12:09:23-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Found 2 items\ndrwxr-xr-x   - hdfs supergroup          0 2022-05-31 09:19 /warehouse/bak/tablespace/external\ndrwxr-xr-x   - hdfs supergroup          0 2022-05-31 09:18 /warehouse/bak/tablespace/managed\n"}]},"apps":[],"jobName":"paragraph_1654369718937_1417524576","id":"20211016-184631_2104056715","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:09:23-0700","dateFinished":"2022-06-04T12:09:33-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:147"},{"title":"3 - Create a new tablespace directory","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -mkdir /warehouse/tablespace\"\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -chown -R hive:hive /warehouse\"\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -ls /warehouse\"","user":"allan_admin","dateUpdated":"2022-06-04T12:09:51-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Found 2 items\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:09 /warehouse/bak\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:09 /warehouse/tablespace\n"}]},"apps":[],"jobName":"paragraph_1654369718938_94565765","id":"20220302-133545_1522853124","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:09:51-0700","dateFinished":"2022-06-04T12:10:02-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:148"},{"title":"4 - Assign a key to the encryption zone ","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs crypto -createZone -keyName hive-key -path /warehouse/tablespace\"\n","user":"allan_admin","dateUpdated":"2022-06-04T12:10:09-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Added encryption zone /warehouse/tablespace\n"}]},"apps":[],"jobName":"paragraph_1654369718938_1282911846","id":"20211016-184920_60711222","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:10:10-0700","dateFinished":"2022-06-04T12:10:15-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:149"},{"title":"5 - List the Encryption Zones","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs crypto -listZones\"","user":"allan_admin","dateUpdated":"2022-06-04T12:10:19-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: /warehouse/tablespace  hive-key \n\n"}]},"apps":[],"jobName":"paragraph_1654369718938_1313060856","id":"20211016-193130_281608588","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:10:19-0700","dateFinished":"2022-06-04T12:10:22-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:150"},{"title":"6 - Create supporting directories in the encryption zone","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -mkdir -p /warehouse/tablespace/tmp\"\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -chmod 1777 /warehouse/tablespace/tmp\"\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -mkdir -p /warehouse/tablespace/data/clouddev\"\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -chown -R hive:hive /warehouse\"\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -ls -R /warehouse/tablespace\"\n","user":"allan_admin","dateUpdated":"2022-06-04T12:10:44-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: Password: Password: Password: drwxrwxrwt   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/.Trash\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/data\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/data/clouddev\ndrwxrwxrwt   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/tmp\n"}]},"apps":[],"jobName":"paragraph_1654369718939_-1759226621","id":"20220302-132308_528008491","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:10:44-0700","dateFinished":"2022-06-04T12:11:01-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:151"},{"text":"%md\n\n####It is a recommended CDP administrative practice to create /warehouse/tablespace/data/clouddev to all for download of raw data. All transactions, such as the writing of data, should be contained within the same encyrption zone as the database directories. This prevents having to use hadoop distcp to move data from one encryption zone to another. The tmp directory will be used for Hive scratch files.","user":"allan_admin","dateUpdated":"2022-06-04T12:11:28-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h4>It is a recommended CDP administrative practice to create /warehouse/tablespace/data/clouddev to all for download of raw data. All transactions, such as the writing of data, should be contained within the same encyrption zone as the database directories. This prevents having to use hadoop distcp to move data from one encryption zone to another. The tmp directory will be used for Hive scratch files.</h4>\n"}]},"apps":[],"jobName":"paragraph_1654369718939_-1420175329","id":"20220302-132444_213335042","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:11:28-0700","dateFinished":"2022-06-04T12:11:28-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:152"},{"title":"7 - Copy old Hive directory into new Hive encryption zone ","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hadoop distcp -skipcrccheck -update /warehouse/bak/tablespace/ /warehouse/tablespace\"\n\n","user":"allan_admin","dateUpdated":"2022-06-04T12:11:40-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"INCOMPLETE","msg":[{"type":"TEXT","data":"Password: 22/06/04 12:11:43 INFO tools.DistCp: Input Options: DistCpOptions{atomicCommit=false, syncFolder=true, deleteMissing=false, ignoreFailures=false, overwrite=false, append=false, useDiff=false, useRdiff=false, fromSnapshot=null, toSnapshot=null, skipCRC=true, blocking=true, numListstatusThreads=0, maxMaps=20, mapBandwidth=0.0, copyStrategy='uniformsize', preserveStatus=[], atomicWorkPath=null, logPath=null, sourceFileListing=null, sourcePaths=[/warehouse/bak/tablespace], targetPath=/warehouse/tablespace, filtersFile='null', blocksPerChunk=0, copyBufferSize=8192, verboseLog=false, directWrite=false}, sourcePaths=[/warehouse/bak/tablespace], targetPathExists=true, preserveRawXattrsfalse\n22/06/04 12:11:43 INFO client.RMProxy: Connecting to ResourceManager at master-1.example.com/10.0.0.101:8032\n22/06/04 12:11:44 INFO hdfs.DFSClient: Created token for allan_admin: HDFS_DELEGATION_TOKEN owner=allan_admin@EXAMPLE.COM, renewer=yarn, realUser=, issueDate=1654369904040, maxDate=1654974704040, sequenceNumber=9, masterKeyId=15 on ha-hdfs:my-name-service\n22/06/04 12:11:44 INFO kms.KMSClientProvider: New token created: (Kind: kms-dt, Service: kms://https@kms-1.example.com:9494/kms, Ident: (kms-dt owner=allan_admin, renewer=yarn, realUser=, issueDate=1654369904550, maxDate=1654974704550, sequenceNumber=6, masterKeyId=12))\n22/06/04 12:11:44 INFO security.TokenCache: Got dt for hdfs://my-name-service; Kind: HDFS_DELEGATION_TOKEN, Service: ha-hdfs:my-name-service, Ident: (token for allan_admin: HDFS_DELEGATION_TOKEN owner=allan_admin@EXAMPLE.COM, renewer=yarn, realUser=, issueDate=1654369904040, maxDate=1654974704040, sequenceNumber=9, masterKeyId=15)\n22/06/04 12:11:44 INFO security.TokenCache: Got dt for hdfs://my-name-service; Kind: kms-dt, Service: kms://https@kms-1.example.com;kms-2.example.com:9494/kms, Ident: (kms-dt owner=allan_admin, renewer=yarn, realUser=, issueDate=1654369904550, maxDate=1654974704550, sequenceNumber=6, masterKeyId=12)\n22/06/04 12:11:45 INFO tools.SimpleCopyListing: Paths (files+dirs) cnt = 81; dirCnt = 67\n22/06/04 12:11:45 INFO tools.SimpleCopyListing: Build file listing completed.\n22/06/04 12:11:45 INFO Configuration.deprecation: io.sort.mb is deprecated. Instead, use mapreduce.task.io.sort.mb\n22/06/04 12:11:45 INFO Configuration.deprecation: io.sort.factor is deprecated. Instead, use mapreduce.task.io.sort.factor\n22/06/04 12:11:45 INFO tools.DistCp: Number of paths in the copy list: 81\n22/06/04 12:11:45 INFO tools.DistCp: Number of paths in the copy list: 81\n22/06/04 12:11:45 INFO client.RMProxy: Connecting to ResourceManager at master-1.example.com/10.0.0.101:8032\n22/06/04 12:11:45 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /user/allan_admin/.staging/job_1654228611623_0002\n22/06/04 12:11:46 INFO mapreduce.JobSubmitter: number of splits:19\n22/06/04 12:11:46 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1654228611623_0002\n22/06/04 12:11:46 INFO mapreduce.JobSubmitter: Executing with tokens: [Kind: HDFS_DELEGATION_TOKEN, Service: ha-hdfs:my-name-service, Ident: (token for allan_admin: HDFS_DELEGATION_TOKEN owner=allan_admin@EXAMPLE.COM, renewer=yarn, realUser=, issueDate=1654369904040, maxDate=1654974704040, sequenceNumber=9, masterKeyId=15), Kind: kms-dt, Service: kms://https@kms-1.example.com;kms-2.example.com:9494/kms, Ident: (kms-dt owner=allan_admin, renewer=yarn, realUser=, issueDate=1654369904550, maxDate=1654974704550, sequenceNumber=6, masterKeyId=12)]\n22/06/04 12:11:46 INFO conf.Configuration: resource-types.xml not found\n22/06/04 12:11:46 INFO resource.ResourceUtils: Unable to find 'resource-types.xml'.\n22/06/04 12:11:47 INFO impl.YarnClientImpl: Submitted application application_1654228611623_0002\n22/06/04 12:11:47 INFO mapreduce.Job: The url to track the job: https://master-1.example.com:8090/proxy/application_1654228611623_0002/\n22/06/04 12:11:47 INFO tools.DistCp: DistCp job-id: job_1654228611623_0002\n22/06/04 12:11:47 INFO mapreduce.Job: Running job: job_1654228611623_0002\n22/06/04 12:12:09 INFO mapreduce.Job: Job job_1654228611623_0002 running in uber mode : false\n22/06/04 12:12:09 INFO mapreduce.Job:  map 0% reduce 0%\n22/06/04 12:12:21 INFO mapreduce.Job:  map 5% reduce 0%\n22/06/04 12:12:25 INFO mapreduce.Job:  map 11% reduce 0%\n22/06/04 12:12:30 INFO mapreduce.Job:  map 16% reduce 0%\n22/06/04 12:12:33 INFO mapreduce.Job:  map 21% reduce 0%\n22/06/04 12:12:34 INFO mapreduce.Job:  map 32% reduce 0%\n22/06/04 12:12:35 INFO mapreduce.Job:  map 42% reduce 0%\n"},{"type":"TEXT","data":"Paragraph received a SIGTERM\nExitValue: 143"}]},"apps":[],"jobName":"paragraph_1654369718940_486890041","id":"20211016-193527_2022456863","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:11:40-0700","dateFinished":"2022-06-04T12:12:56-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:153"},{"text":"%md\n\n####Disregard if you receive a SIGTERM from Zeppelin the job did complete successfully. You can check the job in the YARN Resource Manager Web UI.\n","user":"allan_admin","dateUpdated":"2022-06-04T12:13:20-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h4>Disregard if you receive a SIGTERM from Zeppelin the job did complete successfully. You can check the job in the YARN Resource Manager Web UI.</h4>\n"}]},"apps":[],"jobName":"paragraph_1654369718941_148554336","id":"20220302-135731_1546303268","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:13:20-0700","dateFinished":"2022-06-04T12:13:20-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:154"},{"title":"7 - Change ownership","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -chown -R hive:hive /warehouse/tablespace\"\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -ls -R /warehouse/tablespace\"","user":"allan_admin","dateUpdated":"2022-06-04T12:13:30-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Password: drwxrwxrwt   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/.Trash\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/data\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/data/clouddev\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/information_schema.db\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/BUCKETING_COLS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/CDS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/COLUMNS_V2\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/COMPACTION_QUEUE\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/COMPLETED_COMPACTIONS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/DATABASE_PARAMS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/DBS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/DB_PRIVS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/DB_VERSION\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/FUNCS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/GLOBAL_PRIVS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/KEY_CONSTRAINTS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/MV_CREATION_METADATA\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/MV_TABLES_USED\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PARTITIONS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PARTITION_KEYS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PARTITION_KEY_VALS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PARTITION_PARAMS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PART_COL_PRIVS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PART_COL_STATS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/PART_PRIVS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/REPLICATION_METRICS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/ROLES\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/ROLE_MAP\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SCHEDULED_EXECUTIONS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SCHEDULED_QUERIES\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SDS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SD_PARAMS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SEQUENCE_TABLE\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SERDES\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SERDE_PARAMS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SKEWED_COL_NAMES\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SKEWED_COL_VALUE_LOC_MAP\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SKEWED_STRING_LIST\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SKEWED_STRING_LIST_VALUES\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SKEWED_VALUES\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/SORT_COLS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/TABLE_PARAMS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/TAB_COL_STATS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/TBLS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/TBL_COL_PRIVS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/TBL_PRIVS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/WM_MAPPINGS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/WM_POOLS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/WM_POOLS_TO_TRIGGERS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/WM_RESOURCEPLANS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/external/hive/sys.db/WM_TRIGGERS\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-05-31\n-rw-r--r--   3 hive hive      33175 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-05-31/appattempt_1654013805243_0001_000001\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-01\n-rw-r--r--   3 hive hive      33189 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-01/appattempt_1654102183094_0001_000001\n-rw-r--r--   3 hive hive      33298 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-01/appattempt_1654102183094_0002_000001\n-rw-r--r--   3 hive hive      33271 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-01/appattempt_1654118594488_0001_000001\n-rw-r--r--   3 hive hive      33343 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-01/appattempt_1654123248285_0001_000001\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-02\n-rw-r--r--   3 hive hive      33424 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-02/appattempt_1654199207981_0001_000001\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-03\n-rw-r--r--   3 hive hive      33455 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-03/appattempt_1654226523356_0001_000001\n-rw-r--r--   3 hive hive      33499 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/app_data/date=2022-06-03/appattempt_1654228611623_0001_000001\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/dag_data\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/dag_data/date=2022-06-01\n-rw-r--r--   3 hive hive      10648 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/dag_data/date=2022-06-01/dag_1654102183094_0002_1_1\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/dag_meta\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/dag_meta/date=2022-06-01\n-rw-r--r--   3 hive hive        356 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/dag_meta/date=2022-06-01/appattempt_1654102183094_0002_000001\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-01\n-rw-r--r--   3 hive hive     274031 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-01/hive_5cbf111e-b641-4664-91c8-f88f9a287618_1\n-rw-r--r--   3 hive hive        165 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-01/hive_727e6c91-4a08-4a50-8e3f-2d8a1ca729d8_1\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-02\n-rw-r--r--   3 hive hive        165 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-02/hive_727e6c91-4a08-4a50-8e3f-2d8a1ca729d8_1\ndrwxr-xr-x   - hive hive          0 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-04\n-rw-r--r--   3 hive hive        165 2022-06-04 12:12 /warehouse/tablespace/managed/hive/sys.db/query_data/date=2022-06-04/hive_65c3b324-3c05-476d-bd8d-bf7e577796c9_1\ndrwxrwxrwt   - hive hive          0 2022-06-04 12:10 /warehouse/tablespace/tmp\n"}]},"apps":[],"jobName":"paragraph_1654369718941_1130446697","id":"20220302-132914_1918404455","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:13:30-0700","dateFinished":"2022-06-04T12:13:37-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:155"},{"title":"8 - Restart hive and hive_on_tez","text":"%md\n\n####  Return to Cloudera Manager and start hive and hive_on_tez. \n####  Restart Zeppelin.\n####  After a successful restart use the Zeppelin interperter notebook to validate Hive.\n\n","user":"allan_admin","dateUpdated":"2022-06-04T12:23:16-0700","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h4>Return to Cloudera Manager and start hive and hive_on_tez.</h4>\n<h4>Restart Zeppelin.</h4>\n<h4>After a successful restart use the Zeppelin interperter notebook to validate Hive.</h4>\n"}]},"apps":[],"jobName":"paragraph_1654369718942_-1486861864","id":"20220321-185942_1225537070","dateCreated":"2022-06-04T12:08:38-0700","dateStarted":"2022-06-04T12:23:17-0700","dateFinished":"2022-06-04T12:23:18-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:156"},{"text":"%md\n\n# Reset\n","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Reset</h1>\n"}]},"apps":[],"jobName":"paragraph_1654369718944_-1045654383","id":"20210503-201327_1691139602","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:157"},{"title":"A - Stop hive and hive_on_tez","text":"%md\n\nStop hive and hive_on_tez","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1654369718945_1577161823","id":"20220401-050013_1804638315","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:158"},{"title":"B - Delete the encryption zone.","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -rm -r -skipTrash /warehouse/tablespace\"\n\n","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Deleted /warehouse/tablespace\n"}]},"apps":[],"jobName":"paragraph_1654369718945_-960385369","id":"20210503-201344_78143625","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:159"},{"title":"C - Copy in the original tablespace directory.","text":"%sh\n\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -cp /warehouse/bak/tablespace /warehouse\"\necho BadPass@1 | su - allan_admin -c \"hdfs dfs -chown -R hive:hive /warehouse\"\n\n\n","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: "}]},"apps":[],"jobName":"paragraph_1654369718946_799846323","id":"20220302-134654_1341441659","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:160"},{"title":"D - Rollback the scratchdir in hive_on_tez","text":"%md\n\nRollback the scratchdir in hive_on_tez\n\n","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Password: Deleted /temp\n"}]},"apps":[],"jobName":"paragraph_1654369718946_-1735646213","id":"20220302-131808_1268710019","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:161"},{"title":"E - Start hive and hive_on_tez","text":"%md\n\nStart hive and hive_on_tez. Then test by creating a database and table.","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1654369718947_-378332750","id":"20220401-050249_1161016068","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:162"},{"text":"%angular\n","user":"allan_admin","dateUpdated":"2022-06-04T12:08:38-0700","config":{"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1654369718947_517462245","id":"20191113-001039_505978317","dateCreated":"2022-06-04T12:08:38-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:163"}],"name":"cloudhive/create_encrypt_hive","id":"2H5H72437","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"livy:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}