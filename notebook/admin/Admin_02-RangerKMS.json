{"paragraphs":[{"text":"%md\n# About\n\n**Lab:** KMS\n**Objective:**\n**File Locations:**\n```\n```\n\n**Successful Outcome:** \n**Before You Begin:** \n**Related Lessons:** \n\n---","user":"sysadmin","dateUpdated":"2020-05-25T05:00:08+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> KMS\n<br  /><strong>Objective:</strong>\n<br  /><strong>File Locations:</strong></p>\n<p><strong>Successful Outcome:</strong>\n<br  /><strong>Before You Begin:</strong>\n<br  /><strong>Related Lessons:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590382795502_-1577113388","id":"20200501-214558_1717013358","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-25T05:00:08+0000","dateFinished":"2020-05-25T05:00:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:108622"},{"text":"%md\n# Setup","user":"sysadmin","dateUpdated":"2020-05-25T06:14:28+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n"}]},"apps":[],"jobName":"paragraph_1590382795509_1030106300","id":"20200501-215036_1976291396","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-25T06:14:28+0000","dateFinished":"2020-05-25T06:14:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108623"},{"title":"Import: Validate the admin groups access to global policies","text":"%md\nThese tasks should have been done with the exercises on Ranger\n\nEnsure admin group has full permissions on hdfs all-path global policy\nEnsure admin group has full permissions on YARN all-queue global policy\nEnsure admin group has full permissions on all hive global polcies\n","user":"sysadmin","dateUpdated":"2020-05-30T23:09:21+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>These tasks should have been done with the exercises on Ranger</p>\n<p>Ensure admin group has full permissions on hdfs all-path global policy\n<br  />Ensure admin group has full permissions on YARN all-queue global policy\n<br  />Ensure admin group has full permissions on all hive global polcies</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795510_-1328453036","id":"20200501-220437_307003241","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:09:21+0000","dateFinished":"2020-05-30T23:09:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108624"},{"title":"Import: Grant the admin group access to default KMS key policies","text":"%md\nThis will allow members of the admin group to generate Encrypted Data Keys and to Decrypt data with those keys\n\nAmbari > Service > Ranger \nkeyadmin/Password\nAccess Manager\nService Manager > KMS > cloudair_kms\nEdit the default policy\nAdd an Allow Conditions for the admin group\nGrant all permissions\n","user":"sysadmin","dateUpdated":"2020-05-30T23:09:23+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>This will allow members of the admin group to generate Encrypted Data Keys and to Decrypt data with those keys</p>\n<p>Ambari > Service > Ranger\n<br  />keyadmin/Password\n<br  />Access Manager\n<br  />Service Manager > KMS > cloudair_kms\n<br  />Edit the default policy\n<br  />Add an Allow Conditions for the admin group\n<br  />Grant all permissions</p>\n"}]},"apps":[],"jobName":"paragraph_1590879914019_-343344286","id":"20200530-230514_1709712045","dateCreated":"2020-05-30T23:05:14+0000","dateStarted":"2020-05-30T23:09:23+0000","dateFinished":"2020-05-30T23:09:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108625"},{"text":"%md\n# Lab","user":"sysadmin","dateUpdated":"2020-05-25T05:00:32+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Lab</h1>\n"}]},"apps":[],"jobName":"paragraph_1590382795511_226836494","id":"20200501-215049_96830641","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-25T05:00:32+0000","dateFinished":"2020-05-25T05:00:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108626"},{"text":"%md\n### Set up Users","user":"sysadmin","dateUpdated":"2020-05-25T05:00:35+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Set up Users</h3>\n"}]},"apps":[],"jobName":"paragraph_1590382795511_1180623600","id":"20200501-220508_1011050106","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-25T05:00:35+0000","dateFinished":"2020-05-25T05:00:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108627"},{"title":"1 - Login to Ranger KMS as keyadmin","text":"%md\nAmbari > Service > Ranger > Quicklink\nRanger > keyadmin | Password","user":"sysadmin","dateUpdated":"2020-05-30T23:50:51+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Ambari > Service > Ranger > Quicklink\n<br  />Ranger > keyadmin | Password</p>\n"}]},"apps":[],"jobName":"paragraph_1590880274594_1391948535","id":"20200530-231114_1299737511","dateCreated":"2020-05-30T23:11:14+0000","dateStarted":"2020-05-30T23:50:51+0000","dateFinished":"2020-05-30T23:50:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108628"},{"title":"2 - Create Encryption Zone Keys called zonekey1 and zonekey2","text":"%md\nService Manager > Encryption\nKMS Service > cloudair_kms\n\nCreate a key called zonekey1 \nSave\n\nCreate a key called zonekey2\nSave","user":"sysadmin","dateUpdated":"2020-05-30T23:50:52+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Service Manager > Encryption\n<br  />KMS Service > cloudair_kms</p>\n<p>Create a key called zonekey1\n<br  />Save</p>\n<p>Create a key called zonekey2\n<br  />Save</p>\n"}]},"apps":[],"jobName":"paragraph_1590880403509_1919521202","id":"20200530-231323_494390499","dateCreated":"2020-05-30T23:13:23+0000","dateStarted":"2020-05-30T23:50:52+0000","dateFinished":"2020-05-30T23:50:52+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108629"},{"title":"3 - Open three terminals","text":"%md\nssh sysadmin@admin01","user":"sysadmin","dateUpdated":"2020-05-30T23:50:54+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>ssh sysadmin@admin01</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795512_-1488170385","id":"20200501-220603_394546060","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:50:54+0000","dateFinished":"2020-05-30T23:50:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108630"},{"title":"4 - In the first terminal kinit as sysadmin  ","text":"%md\nkinit\nklist","user":"sysadmin","dateUpdated":"2020-05-30T23:50:56+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>kinit\n<br  />klist</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795512_-2020298060","id":"20200501-220639_951440854","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:50:56+0000","dateFinished":"2020-05-30T23:50:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108631"},{"title":"5 - In the second terminal kinit as prose","text":"%md\nsudo su -l prose\nkinit\nklist","user":"sysadmin","dateUpdated":"2020-05-30T23:50:58+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo su -l prose\n<br  />kinit\n<br  />klist</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795513_1589282698","id":"20200501-220919_1343671399","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:50:58+0000","dateFinished":"2020-05-30T23:50:58+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108632"},{"title":"6 - In the third terminal use the keytab to kinit as hdfs","text":"%md\nsudo -u -l hdfs \nkinit -kt /etc/security/keytabs/hdfs.headless.keytab \"hdfs-cloudair\"\nklist","user":"sysadmin","dateUpdated":"2020-05-30T23:51:01+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>sudo -u -l hdfs\n<br  />kinit -kt /etc/security/keytabs/hdfs.headless.keytab &ldquo;hdfs-cloudair&rdquo;\n<br  />klist</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795513_-338544615","id":"20200501-220700_1949682789","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:01+0000","dateFinished":"2020-05-30T23:51:01+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108633"},{"text":"%md\n### Create and assign keys","user":"sysadmin","dateUpdated":"2020-05-30T23:51:03+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Create and assign keys</h3>\n"}]},"apps":[],"jobName":"paragraph_1590882290750_-2101000840","id":"20200530-234450_1874753777","dateCreated":"2020-05-30T23:44:50+0000","dateStarted":"2020-05-30T23:51:03+0000","dateFinished":"2020-05-30T23:51:03+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108634"},{"title":"7 - In the first terminal list the keys and their metadata","text":"%md\nhadoop key list -metadata","user":"sysadmin","dateUpdated":"2020-05-30T23:51:07+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hadoop key list -metadata</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795514_-1538814252","id":"20200501-221009_1534584172","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:07+0000","dateFinished":"2020-05-30T23:51:07+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108635"},{"title":"8 - In the first terminal create two directors for KMS EZ","text":"%md\nhdfs dfs -mkdir /data/zone1\nhdfs dfs -mkdir /data/zone2","user":"sysadmin","dateUpdated":"2020-05-30T23:51:09+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -mkdir /data/zone1\n<br  />hdfs dfs -mkdir /data/zone2</p>\n"}]},"apps":[],"jobName":"paragraph_1590384457982_42638107","id":"20200525-052737_78106055","dateCreated":"2020-05-25T05:27:37+0000","dateStarted":"2020-05-30T23:51:09+0000","dateFinished":"2020-05-30T23:51:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108636"},{"title":"9 - In the third terminal create 2 directories as EZs using one key for each","text":"%md\nhdfs crypto -createZone -keyName zonekey1 -path /data/zone1\nhdfs crypto -createZone -keyName zonekey2 -path /data/zone2\n","user":"sysadmin","dateUpdated":"2020-05-30T23:51:11+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs crypto -createZone -keyName zonekey1 -path /data/zone1\n<br  />hdfs crypto -createZone -keyName zonekey2 -path /data/zone2</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795514_-1871297468","id":"20200501-221008_1160989737","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:11+0000","dateFinished":"2020-05-30T23:51:11+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108637"},{"title":"10 - In the third terminal list the zones","text":"%md\nhdfs crypto -listZones","user":"sysadmin","dateUpdated":"2020-05-30T23:51:14+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs crypto -listZones</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795515_-291522786","id":"20200501-221106_515452452","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:14+0000","dateFinished":"2020-05-30T23:51:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108638"},{"text":"%md\n### Load and access data","user":"sysadmin","dateUpdated":"2020-05-30T23:46:38+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Load and access data</h3>\n"}]},"apps":[],"jobName":"paragraph_1590882360558_1853389890","id":"20200530-234600_2131828714","dateCreated":"2020-05-30T23:46:00+0000","dateStarted":"2020-05-30T23:46:38+0000","dateFinished":"2020-05-30T23:46:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108639"},{"title":"11 - In the first terminal copy data into the encryption zones","text":"%md\nhdfs dfs -cp /data/latin/* /data/zone1\nhdfs dfs -cp /data/books/* /data/zone2","user":"sysadmin","dateUpdated":"2020-05-30T23:51:17+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -cp /data/latin/<em> /data/zone1\n<br  />hdfs dfs -cp /data/books/</em> /data/zone2</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795515_-1320097789","id":"20200501-221145_370026251","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:17+0000","dateFinished":"2020-05-30T23:51:17+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108640"},{"title":"12 - In the first terminal access the data","text":"%md\nhdfs dfs -ls /data/zone1\nhdfs dfs -ls /data/zone2\nhdfs dfs -cat /data/zone1/latin.txt\nhdfs dfs -cat /data/zone2/book06.txt","user":"sysadmin","dateUpdated":"2020-05-30T23:51:19+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -ls /data/zone1\n<br  />hdfs dfs -ls /data/zone2\n<br  />hdfs dfs -cat /data/zone1/latin.txt\n<br  />hdfs dfs -cat /data/zone2/book06.txt</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795516_-154213973","id":"20200501-221622_1501547891","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:19+0000","dateFinished":"2020-05-30T23:51:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108641"},{"title":"13 - in the second terminal attempt to access the data","text":"%md\nhdfs dfs -ls /data/zone1\nhdfs dfs -cat /data/zone1/latin.txt\ncat: User:prose not allowed to do 'DECRYPT_EEK' on 'testkey1'","user":"sysadmin","dateUpdated":"2020-05-30T23:51:22+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -ls /data/zone1\n<br  />hdfs dfs -cat /data/zone1/latin.txt\n<br  />cat: User:prose not allowed to do 'DECRYPT_EEK' on 'testkey1'</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795516_-2126815783","id":"20200501-221837_883224464","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:22+0000","dateFinished":"2020-05-30T23:51:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108642"},{"title":"14 - In Ranger check Ranger's Audit trail","text":"%md\nCheck the Ranger > Audit page and notice the access for sysadmin and for prose","user":"sysadmin","dateUpdated":"2020-05-30T23:51:24+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Check the Ranger > Audit page and notice the access for sysadmin and for prose</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795517_-1692278828","id":"20200501-221849_304968968","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:24+0000","dateFinished":"2020-05-30T23:51:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108643"},{"title":"15 - In the first terminal test delete a file in the EZ's","text":"%md\nhdfs dfs -rm /data/zone2/book03.txt\nhdfs dfs -rm -skipTrash /data/zone2/book04.txt\nhdfs dfs -ls /data/zone2","user":"sysadmin","dateUpdated":"2020-05-30T23:51:26+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -rm /data/zone2/book03.txt\n<br  />hdfs dfs -rm -skipTrash /data/zone2/book04.txt\n<br  />hdfs dfs -ls /data/zone2</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795517_1698399515","id":"20200501-221909_1303842503","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:26+0000","dateFinished":"2020-05-30T23:51:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108644"},{"title":"16 - In the first terminal copy a file between the EZ's","text":"%md\nFiles can be copied between encryption zones using `distcp` with the `-skipcrccheck` option\nhadoop distcp -skipcrccheck -update /data/zone2/book05.txt /data/zone1\nhdfs dfs -ls /data/zone1","user":"sysadmin","dateUpdated":"2020-05-30T23:51:28+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Files can be copied between encryption zones using <code>distcp</code> with the <code>-skipcrccheck</code> option\n<br  />hadoop distcp -skipcrccheck -update /data/zone2/book05.txt /data/zone1\n<br  />hdfs dfs -ls /data/zone1</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795518_-1486158969","id":"20200501-222127_1475369527","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:51:28+0000","dateFinished":"2020-05-30T23:51:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108645"},{"text":"%md\n### Grant access to data","user":"sysadmin","dateUpdated":"2020-05-30T23:51:31+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Grant access to data</h3>\n"}]},"apps":[],"jobName":"paragraph_1590882421428_-813357403","id":"20200530-234701_889579095","dateCreated":"2020-05-30T23:47:01+0000","dateStarted":"2020-05-30T23:51:31+0000","dateFinished":"2020-05-30T23:51:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108646"},{"title":"17 - Grant biz group access to the latin.txt file in /data/zone1","text":"%md\nRanger KMS > Access Manager > cloudair_kms > edit\nAdd an allow condition for biz with GetMetaData DecryptEEK","user":"sysadmin","dateUpdated":"2020-05-30T23:51:34+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Ranger KMS > Access Manager > cloudair_kms > edit\n<br  />Add an allow condition for biz with GetMetaData DecryptEEK</p>\n"}]},"apps":[],"jobName":"paragraph_1590880656692_175675133","id":"20200530-231736_238888151","dateCreated":"2020-05-30T23:17:36+0000","dateStarted":"2020-05-30T23:51:34+0000","dateFinished":"2020-05-30T23:51:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108647"},{"title":"18 - In the second terminal see if prose can access data","text":"%md\nhdfs dfs -cat /data/zone1/latin.txt\n","user":"sysadmin","dateUpdated":"2020-05-30T23:51:37+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -cat /data/zone1/latin.txt</p>\n"}]},"apps":[],"jobName":"paragraph_1590881695404_-473976026","id":"20200530-233455_1629515242","dateCreated":"2020-05-30T23:34:55+0000","dateStarted":"2020-05-30T23:51:37+0000","dateFinished":"2020-05-30T23:51:37+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108648"},{"title":"19 - In the second terminal see if prose can write data","text":"%md\nhdfs dfs -put /etc/passwd /data/zone1\n","user":"sysadmin","dateUpdated":"2020-05-30T23:51:39+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>hdfs dfs -put /etc/passwd /data/zone1</p>\n"}]},"apps":[],"jobName":"paragraph_1590881906763_-950023378","id":"20200530-233826_1938262140","dateCreated":"2020-05-30T23:38:26+0000","dateStarted":"2020-05-30T23:51:39+0000","dateFinished":"2020-05-30T23:51:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108649"},{"title":"20 - Cleanup","text":"%md\nUse kdestrory in terminal two\nLog out of Ranger KMS","user":"sysadmin","dateUpdated":"2020-05-30T23:51:42+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Use kdestrory in terminal two\n<br  />Log out of Ranger KMS</p>\n"}]},"apps":[],"jobName":"paragraph_1590387199453_-1338945665","id":"20200525-061319_266752891","dateCreated":"2020-05-25T06:13:19+0000","dateStarted":"2020-05-30T23:51:42+0000","dateFinished":"2020-05-30T23:51:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108650"},{"text":"%md\n# Result\n\n**You have now:** \nLearned the fundamentals of Ranger KMS","user":"sysadmin","dateUpdated":"2020-05-30T23:50:33+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong>\n<br  />Learned the fundamentals of Ranger KMS</p>\n"}]},"apps":[],"jobName":"paragraph_1590382795530_1066845808","id":"20200501-215114_1780935962","dateCreated":"2020-05-25T04:59:55+0000","dateStarted":"2020-05-30T23:50:33+0000","dateFinished":"2020-05-30T23:50:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:108651"},{"text":"%md\n","user":"sysadmin","dateUpdated":"2020-05-25T06:12:54+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590387174437_526886034","id":"20200525-061254_1406087805","dateCreated":"2020-05-25T06:12:54+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:108652"}],"name":"Admin/02-RangerKMS","id":"2FBPNND84","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"psql:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}