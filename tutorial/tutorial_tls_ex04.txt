# Tutorial TLS
# mod08_ex04: Creating Host Keystore

1.
$ cd ~/tls/hosts
$ keytool -genkey -keyalg RSA -keystore hosts.jks -storepass BadPass@1 -keypass BadPass@1 -alias hosts.key -validity 365
First and Last Name: Prim Rose
Unit: Edu
Organization: Cloudride
City: Santa Clara
State: CA
Country: US

2.
$ keytool -importkeystore -srckeystore hosts.jks -srcalias hosts.key -srcstorepass BadPass@1 -deststoretype PKCS12 -destkeystore hosts.p12 -deststorepass BadPass@1
$ openssl pkcs12 -nocerts -nodes -in hosts.p12 -password pass:BadPass@1 -out hosts.key

3.
$ keytool -certreq -keyalg RSA -keystore hosts.jks -storepass BadPass@1 -keypass BadPass@1 -alias hosts.key -file hosts.csr
$ cp hosts.csr ~/tls/cm/hosts.csr

4.
$ cd ~/tls/cm
$ openssl x509 -req -CAkey cm.key -CA cm.crt -in hosts.csr -out hosts.crt -days 365 -CAcreateserial
$ cp hosts.crt ~/tls/hosts/hosts.crt

5.
$ cd ~/tls/hosts
$ keytool -importcert -keystore hosts.jks -storepass BadPass@1 -keypass BadPass@1 -alias hosts.crt -file hosts.crt 

6.
% keytool -list -v -keystore hosts.jks  -storepass BadPass@1 | less

7.
% keytool -storepasswd -keystore hosts.jks -storepass BadPass@1 -new badpassword
% keytool -storepasswd -keystore hosts.jks -storepass BadPass@1 -new badpassword
% keytool -changealias -keystore hosts.jks -storepass badpassword -alias hosts.key -destalias badalias
% keytool -delete -keystore hosts.jks -storepass badpassword -alias hosts.crt
 
